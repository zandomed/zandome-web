---
import 'vanilla-cookieconsent/dist/cookieconsent.css';
---

<script>
  import { run } from 'vanilla-cookieconsent';

  import { config } from './CookieConsentConfig';

  // toggle custom black theme
  // document.body.classList.add('cc--elegant-black');
  run(config);
</script>
<script is:inline>
  // Restore the `show--consent` class if it was present before the page swap
  document.addEventListener('astro:before-preparation', () => {
    const htmlClassName = window.document.documentElement.className;
    const consentClassPresent = htmlClassName.includes('show--consent') ? true : false;
    window._showConsentClass = consentClassPresent;
  });

  document.addEventListener('astro:before-swap', (event) => {
    const showConsent = window._showConsentClass ? ` show--consent` : '';
    event.newDocument.documentElement.className += showConsent;
  });
</script>
